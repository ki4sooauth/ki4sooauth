<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="../../css/gooagoo_base.css" rel="stylesheet" type="text/css" />
<title>无标题文档</title>
<style type="text/css">
body {
	margin-left: 10px;
}
.STYLE1 {color: #FF0000}
</style>
</head>

<body>
<p><br />
</p>
<p>&nbsp;</p>
<table id="righttable" cellspacing="0" summary="The technical specifications of the Apple PowerMac G5 series"> 

<tr> 

<th scope="col" colspan="2"><span class="row">mobe02:用户根据账单信息申请开发票  </span></th> 

</tr> 
<tr> 

<td width="136" class="row">功能说明：</td> 
<td width="658" class="row">
用户根据账单信息申请开发票
 </td> 
</tr>
<tr> 

<td width="136" class="row">程序映射地址：</td> 
<td width="658" class="row"></td> 
</tr> 

<tr> 

<td class="alt">返回值例子：</td> 
<td class="alt"><a href="../xml/mobe02.xml" target="_blank">mobe02.xml</a> | <a href="../xml/mobe02.txt" target="_blank">mobe02.txt</a></td> 
</tr> 
<tr>
  <td valign="top" class="row">参数说明：</td>
  <td class="row">
	<table >
	<tr>
		<td class="alt" align="center">CODE</td>
		<td class="alt" align="center">NAME</td>
		<td class="alt" align="center">是否必填</td>
		<td class="alt" align="center">备注说明</td>
	</tr>
	<tr>
		<td class="row">userid</td>
		<td class="row">用户id</td>
		<td class="row" style="color: #FF0000">必填</td>
		<td class="row">用户编号，唯一，通过UUID产生</td>
	</tr>
	<tr>
		<td class="row">sessionid</td>
		<td class="row">sessionid值</td>
		<td class="row" style="color: #FF0000">必填</td>
		<td class="row">手机登录后的sessionid值</td>
	</tr>
  <tr><td class="row">mac</td><td class="row">手机mac地址</td><td class="row">选填</td><td class="row"></td></tr><tr><td class="row">mver</td><td class="row">手机程序版本</td><td class="row">选填</td><td class="row"></td></tr><tr><td class="row">lid</td><td class="row">lid</td><td class="row">选填</td><td class="row"></td></tr><tr><td class="row">entityposition</td><td class="row">实体店编号</td><td class="row">选填</td><td class="row">用户当前所在实体店编号</td></tr>
	<tr>
		<td class="row">orderid</td>
		<td class="row">订单编号</td>
		<td class="row" style="color: #FF0000">必填</td>
		<td class="row"></td>
	</tr>
	<tr>
		<td class="row">invoicedtile</td>
		<td class="row">发票抬头</td>
		<td class="row" style="color: #FF0000">必填</td>
		<td class="row"></td>
	</tr>
	<tr>
		<td class="row">invoiceditem</td>
		<td class="row">发票项目名称</td>
		<td class="row" style="color: #FF0000">必填</td>
		<td class="row"></td>
	</tr>
	<tr>
		<td class="row">invoicedtype</td>
		<td class="row">发票类型</td>
		<td class="row" style="color: #FF0000">必填</td>
		<td class="row">0-个人，1-公司</td>
	</tr>
	</table>
  </td>
</tr>
<tr>
  <td class="alt">业务逻辑说明：</td>
  <td class="alt">
		1.根据userid、sessionid校验登录状态；<br/>
		2.根据orderid获取订单信息order_info<br/>
		3.根据步骤2填写发票申请表bill_invoice_log信息。<br />
		4.调用推送服务，由推送服务将用户开发票申请推送给转发器。<br/>
		<font style="color: #FF0000">备注：</font>整体流程： <br/> 
		1、用户获取账单或者订单之后申请开发票，申请信息由手机端提交到平台服务器；<br/>
		2、平台服务器推送给转发器；<br/>
		3、转发器推送给商家管理平台；<br/>
		4、商家在商家管理平台上操作，把发票信息推送给第三方发票打印机；<br/>
		5、打印完成之后，商家点击“已完成”，告知转发器；<br/>
		6、转发器生成发票文件；<br/>
		7、平台服务器分析发票文件，并回写发票申请表，并修改账单表的开发票状态（如没有账单，则不写；解析账单文件后，同样需要查看该账单是否已经开过发票）。
  </td>
</tr>
<tr>
  <td class="row">修改日志：</td>
  <td class="row"></td>
</tr> 
</table>
</body>
</html>
